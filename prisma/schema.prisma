generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Conversation {
  id              String          @id @default(cuid())
  title           String
  createdAt       DateTime        @default(now())
  messages        Message[]
  customRequests  CustomRequest[]
  negotiations    Negotiation[]
}

model Message {
  id             String       @id @default(cuid())
  conversation   Conversation @relation(fields: [conversationId], references: [id])
  conversationId String
  from           String       // "buyer" | "artisan"
  text           String
  createdAt      DateTime     @default(now())
}

model CustomRequest {
  id             String       @id @default(cuid())
  conversation   Conversation @relation(fields: [conversationId], references: [id])
  conversationId String

  title          String
  note           String
  imageUrl       String?

  // was: status CustomRequestStatus
  status         String       @default("SENT")
  createdAt      DateTime     @default(now())
}

model Negotiation {
  id             String       @id @default(cuid())
  conversation   Conversation @relation(fields: [conversationId], references: [id])
  conversationId String

  productName    String
  buyerName      String
  offerAmount    Int
  counterAmount  Int?

  // was: status NegotiationStatus
  status         String       @default("PENDING")
  createdAt      DateTime     @default(now())
}

// ‚ùå ye 2 enums HATA DO completely (bilkul na rakho):
// enum CustomRequestStatus { ... }
// enum NegotiationStatus { ... }
